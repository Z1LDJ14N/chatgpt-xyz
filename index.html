<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER SEC AI Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom CSS untuk tema Cyber */
        body { background-color: #020617; color: #38bdf8; font-family: 'Courier New', Courier, monospace; }
        .cyber-border { border: 1px solid #38bdf8; box-shadow: 0 0 10px #0ea5e9; }
        .glow-text { text-shadow: 0 0 5px #38bdf8; }
        .glow-svg { filter: drop-shadow(0 0 5px #22d3ee); }
        #chat-box::-webkit-scrollbar { width: 5px; }
        #chat-box::-webkit-scrollbar-thumb { background: #0ea5e9; }
    </style>
</head>
<body class="flex flex-col h-screen p-2 md:p-4 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 to-black">
    <header class="mb-3 p-3 cyber-border bg-black/60 flex justify-between items-center rounded-lg">
        <div class="flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" class="h-10 w-10 fill-cyan-400 glow-svg">
                <path d="M37.532 16.37a12.928 12.928 0 0 0-8.465-10.493c-1.973-.55-3.955-.824-5.886-.824-3.87 0-7.55 1.11-10.644 3.215-2.988 2.033-5.16 4.897-6.283 8.28-1.123 3.383-1.193 7.042-.205 10.586a12.927 12.927 0 0 0 6.402 8.692c2.512 1.333 5.265 2.03 8.073 2.03 1.78 0 3.522-.28 5.183-.825 4.11-1.35 7.616-4.236 9.87-8.127 2.253-3.89 3.09-8.498 2.356-12.972-1.165 4.666-4.41 8.502-8.87 10.488-.193.086-.387.17-.58.25l-.023.008c-2.704 1.087-5.64 1.663-8.515 1.663-2.04 0-4.04-.29-5.946-.852a11.814 11.814 0 0 1-6.217-4.06c-1.66-1.98-2.695-4.38-2.993-6.94a11.876 11.876 0 0 1 .373-5.706 11.87 11.87 0 0 1 5.144-6.637c2.815-1.82 6.164-2.783 9.686-2.783 1.65 0 3.35.21 5.04.624 1.815.45 3.524 1.244 5.065 2.363 1.856 1.347 3.342 3.102 4.356 5.148 1.015 2.046 1.525 4.27 1.474 6.435zM20.476 8.29c-.036-.01-.07-.022-.107-.033-.067-.02-.133-.04-.2-.058l-.005-.002c-1.245-.346-2.522-.522-3.797-.522-3.325 0-6.52 1.198-9.235 3.464C5.33 12.64 3.428 15.586 2.76 18.7c-.008.04-.017.08-.024.12-.005.02-.008.042-.012.063-.258 1.353-.326 2.766-.204 4.2.173 2.032.673 4.023 1.486 5.92l1.16-2.008c-.36-1.615-.442-3.302-.237-4.927.284-2.23 1.16-4.318 2.59-6.17 1.432-1.85 3.298-3.313 5.51-4.318 1.884-.857 3.902-1.292 6.005-1.292 1.36 0 2.725.184 4.057.547l-1.235-2.14c-.46-.28-1.166-.386-1.383-.405zm10.17 4.712c-1.363-1.497-3.16-2.63-5.19-3.278l1.236 2.14c2.04.56 3.84 1.69 5.224 3.278zM5.913 27.03c1.55 2.346 3.837 4.24 6.617 5.477l-1.16 2.01c-3.44-1.53-6.273-3.873-8.19-6.773 1.007-.236 1.828-.47 2.733-.713zm23.673-1.143c-.507 2.18-1.495 4.226-2.933 6.082l1.234 2.14c1.78-2.3 3-4.833 3.626-7.532l-1.927-.69zm-4.235 8.457c-1.81.568-3.68.856-5.55.856-2.56 0-5.058-.535-7.423-1.59l1.16 2.008c2.615 1.165 5.374 1.756 8.2 1.756 2.067 0 4.135-.32 6.134-.946l-1.235-2.138-1.287.053z"/>
            </svg>
            <h1 class="text-lg md:text-xl font-bold glow-text tracking-wider">CYBER_SEC PROTOCOL</h1>
        </div>
        <div class="text-[10px] md:text-xs text-cyan-500 animate-pulse border border-cyan-500 px-2 py-1 rounded-full">STATUS: ENCRYPTED</div>
    </header>

    <main id="chat-box" class="flex-1 overflow-y-auto mb-3 p-4 cyber-border bg-black/40 rounded-lg space-y-4 text-sm md:text-base">
        <div class="text-xs text-cyan-600 mb-6">
            > INITIALIZING SECURE CONNECTION...<br>
            > BYPASSING FIREWALL... DONE.<br>
            > ESTABLISHING UPLINK TO AI CORE...<br>
            <span class="glow-text text-cyan-300">[SYSTEM READY. AWAITING COMMAND INPUT.]</span>
        </div>
    </main>

    <footer class="flex gap-2 relative">
        <div class="absolute inset-0 bg-cyan-500 blur-md opacity-20 -z-10"></div>
        <input type="text" id="user-input" placeholder="Masukkan perintah terminal..." 
            class="flex-1 bg-black/80 border-2 border-cyan-600 p-3 rounded-l-lg outline-none focus:border-cyan-300 focus:ring-1 ring-cyan-300 text-cyan-300 placeholder-cyan-700 transition-all">
        <button onclick="sendMessage()" class="bg-cyan-700 hover:bg-cyan-500 text-black px-6 py-2 font-bold shadow-[0_0_15px_#22d3ee] rounded-r-lg transition-all active:scale-95">
            KIRIM >_
        </button>
    </footer>

    <script>
        // Script sama seperti sebelumnya, hanya penyesuaian warna sedikit
        async function sendMessage() {
            const input = document.getElementById('user-input');
            const chatBox = document.getElementById('chat-box');
            if (!input.value) return;

            const userMsg = input.value;
            // User bubble: Cyan terang
            chatBox.innerHTML += `<div class="flex justify-end"><div class="bg-cyan-900/40 border border-cyan-500 p-3 rounded-tl-xl rounded-br-xl rounded-bl-xl max-w-[85%]"><span class="text-xs text-cyan-500 block mb-1">USER@TERMINAL ></span><span class="text-cyan-100">${userMsg}</span></div></div>`;
            input.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;

            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: userMsg })
                });
                const data = await response.json();
                if (data.error) throw new Error(data.error);
                // AI bubble: Biru gelap cyber
                chatBox.innerHTML += `<div class="flex justify-start"><div class="bg-black/60 cyber-border p-3 rounded-tr-xl rounded-br-xl rounded-bl-xl max-w-[90%]"><span class="text-xs text-blue-400 block mb-1 glow-text">AI_CORE RESPONSE ></span><span class="text-blue-200 whitespace-pre-wrap">${data.reply}</span></div></div>`;
            } catch (err) {
                chatBox.innerHTML += `<div class="text-red-500 text-xs border border-red-500 p-2 rounded bg-red-900/20">[ERROR: CONNECTION LOST / API FAILURE]</div>`;
            }
            chatBox.scrollTop = chatBox.scrollHeight;
        }
        // Enter untuk kirim
        document.getElementById('user-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
